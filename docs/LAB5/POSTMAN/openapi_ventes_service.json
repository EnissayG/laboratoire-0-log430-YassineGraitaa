{"openapi":"3.1.0","info":{"title":"Ventes Service","version":"1.0"},"paths":{"/api/ventes/":{"get":{"tags":["Ventes"],"summary":"Lister toutes les ventes","description":"Retourne la liste complète des ventes enregistrées dans tous les magasins.","operationId":"get_ventes_api_ventes__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/VenteOut"},"type":"array","title":"Response Get Ventes Api Ventes  Get"}}}}}},"post":{"tags":["Ventes"],"summary":"Enregistrer une nouvelle vente","description":"Crée une vente dans un magasin donné.\n\nBody attendu :\n```json\n{\n  \"magasin_id\": 1,\n  \"date\": \"2025-07-02\",\n  \"panier\": [\n    { \"produit_id\": 1, \"quantite\": 2 },\n    { \"produit_id\": 3, \"quantite\": 1 }\n  ]\n}","operationId":"creer_vente_api_ventes__post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Data"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ventes/rapport":{"get":{"tags":["Ventes"],"summary":"Générer un rapport global des ventes","description":"Retourne un rapport contenant le chiffre d’affaires global par produit et par magasin.","operationId":"rapport_global_api_ventes_rapport_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PerformanceGlobaleDTO"}}}}}}},"/api/ventes/{vente_id}":{"delete":{"tags":["Ventes"],"summary":"Annuler une vente","description":"Annule une vente en la supprimant du système si elle n’a pas déjà été annulée.","operationId":"supprimer_vente_api_ventes__vente_id__delete","parameters":[{"name":"vente_id","in":"path","required":true,"schema":{"type":"integer","title":"Vente Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LigneVenteOut":{"properties":{"produit_id":{"type":"integer","title":"Produit Id"},"quantite":{"type":"integer","title":"Quantite"},"sous_total":{"type":"number","title":"Sous Total"}},"type":"object","required":["produit_id","quantite","sous_total"],"title":"LigneVenteOut"},"MessageResponse":{"properties":{"message":{"type":"string","title":"Message"},"vente_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Vente Id"},"total":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Total"}},"type":"object","required":["message"],"title":"MessageResponse"},"PerformanceGlobaleDTO":{"properties":{"total_ventes":{"type":"number","title":"Total Ventes"},"produits":{"items":{"$ref":"#/components/schemas/ProduitVendableDTO"},"type":"array","title":"Produits"},"ruptures":{"items":{"$ref":"#/components/schemas/ProduitSimpleDTO"},"type":"array","title":"Ruptures"},"surstocks":{"items":{"$ref":"#/components/schemas/ProduitSimpleDTO"},"type":"array","title":"Surstocks"},"ventes_par_magasin":{"items":{"$ref":"#/components/schemas/VentesParMagasinDTO"},"type":"array","title":"Ventes Par Magasin"},"tendance_journaliere":{"items":{"$ref":"#/components/schemas/TendanceJourDTO"},"type":"array","title":"Tendance Journaliere"}},"type":"object","required":["total_ventes","produits","ruptures","surstocks","ventes_par_magasin","tendance_journaliere"],"title":"PerformanceGlobaleDTO"},"ProduitSimpleDTO":{"properties":{"nom":{"type":"string","title":"Nom"},"categorie":{"type":"string","title":"Categorie"},"stock":{"type":"integer","title":"Stock"}},"type":"object","required":["nom","categorie","stock"],"title":"ProduitSimpleDTO"},"ProduitVendableDTO":{"properties":{"nom":{"type":"string","title":"Nom"},"categorie":{"type":"string","title":"Categorie"},"quantite":{"type":"integer","title":"Quantite"}},"type":"object","required":["nom","categorie","quantite"],"title":"ProduitVendableDTO"},"TendanceJourDTO":{"properties":{"jour":{"type":"string","title":"Jour"},"total":{"type":"number","title":"Total"}},"type":"object","required":["jour","total"],"title":"TendanceJourDTO"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VenteOut":{"properties":{"id":{"type":"integer","title":"Id"},"date":{"type":"string","format":"date-time","title":"Date"},"magasin_id":{"type":"integer","title":"Magasin Id"},"total":{"type":"number","title":"Total"},"lignes":{"items":{"$ref":"#/components/schemas/LigneVenteOut"},"type":"array","title":"Lignes"}},"type":"object","required":["id","date","magasin_id","total","lignes"],"title":"VenteOut"},"VentesParMagasinDTO":{"properties":{"magasin":{"type":"string","title":"Magasin"},"total":{"type":"number","title":"Total"}},"type":"object","required":["magasin","total"],"title":"VentesParMagasinDTO"}}}}